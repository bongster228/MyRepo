     1                                 %line 1+1 ast11Re.asm
     2                                 
     3                                 
     4                                 
     5                                 
     6                                 
     7                                 
     8                                 
     9                                 
    10                                 
    11                                 
    12                                 
    13                                 
    14                                 
    15                                 
    16                                 
    17                                 
    18                                 
    19                                 
    20                                 
    21                                 
    22                                 [section .data]
    23                                 
    24                                 
    25                                 
    26                                 
    27                                 LF equ 10
    28                                 NULL equ 0
    29                                 SPACE equ 0x20
    30                                 
    31                                 TRUE equ 1
    32                                 FALSE equ 0
    33                                 
    34                                 EXIT_SUCCESS equ 0
    35                                 EXIT_NOSUCCESS equ 1
    36                                 
    37                                 STDIN equ 0
    38                                 STDOUT equ 1
    39                                 STDERR equ 2
    40                                 
    41                                 SYS_read equ 0
    42                                 SYS_write equ 1
    43                                 SYS_open equ 2
    44                                 SYS_close equ 3
    45                                 SYS_fork equ 57
    46                                 SYS_exit equ 60
    47                                 SYS_creat equ 85
    48                                 SYS_time equ 201
    49                                 
    50                                 O_CREAT equ 0x40
    51                                 O_TRUNC equ 0x200
    52                                 O_APPEND equ 0x400
    53                                 
    54                                 O_RDONLY equ 000000
    55                                 O_WRONLY equ 000001
    56                                 O_RDWR equ 000002
    57                                 
    58                                 S_IRUSR equ 00400
    59                                 S_IWUSR equ 00200
    60                                 S_IXUSR equ 00100
    61                                 
    62                                 
    63                                 
    64                                 
    65 00000000 55736167653A202E2F-    usageMsg db "Usage: ./benford -i <inputFileName> "
    66 00000000 62656E666F7264202D-
    67 00000000 69203C696E70757446-
    68 00000000 696C654E616D653E20 
    69 00000024 2D6F203C6F75747075-     db "-o <outputFileName> -d <T/F>", LF, NULL
    70 00000024 7446696C654E616D65-
    71 00000024 3E202D64203C542F46-
    72 00000024 3E0A00             
    73                                 
    74 00000042 4572726F722C20746F-    errMany db "Error, too many characters on the "
    75 00000042 6F206D616E79206368-
    76 00000042 617261637465727320-
    77 00000042 6F6E2074686520     
    78 00000064 636F6D6D616E64206C-     db "command line.", LF, NULL
    79 00000064 696E652E0A00       
    80                                 
    81 00000073 4572726F722C20746F-    errFew db "Error, too few characters on the "
    82 00000073 6F2066657720636861-
    83 00000073 72616374657273206F-
    84 00000073 6E2074686520       
    85 00000094 636F6D6D616E64206C-     db "command line.", LF, NULL
    86 00000094 696E652E0A00       
    87                                 
    88 000000A3 4572726F722C20696E-    errDSpec db "Error, invalid output display specifier."
    89 000000A3 76616C6964206F7574-
    90 000000A3 70757420646973706C-
    91 000000A3 617920737065636966-
    92 000000A3 6965722E           
    93 000000CB 0A00                    db LF, NULL
    94                                 
    95 000000CD 4572726F722C20696E-    errISpec db "Error, invalid input file specifier."
    96 000000CD 76616C696420696E70-
    97 000000CD 75742066696C652073-
    98 000000CD 70656369666965722E 
    99 000000F1 0A00                    db LF, NULL
   100                                 
   101 000000F3 4572726F722C20696E-    errOSpec db "Error, invalid output file specifier."
   102 000000F3 76616C6964206F7574-
   103 000000F3 7075742066696C6520-
   104 000000F3 737065636966696572-
   105 000000F3 2E                 
   106 00000118 0A00                    db LF, NULL
   107                                 
   108 0000011A 4572726F722C20696E-    errTF db "Error, invalid display option. Must be T or F."
   109 0000011A 76616C696420646973-
   110 0000011A 706C6179206F707469-
   111 0000011A 6F6E2E204D75737420-
   112 0000011A 62652054206F722046-
   113 0000011A 2E                 
   114 00000148 0A00                    db LF, NULL
   115                                 
   116 0000014A 4572726F722C206361-    errOpenIn db "Error, can not open input file."
   117 0000014A 6E206E6F74206F7065-
   118 0000014A 6E20696E7075742066-
   119 0000014A 696C652E           
   120 00000169 0A00                    db LF, NULL
   121                                 
   122 0000016B 4572726F722C206361-    errOpenOut db "Error, can not open output file."
   123 0000016B 6E206E6F74206F7065-
   124 0000016B 6E206F757470757420-
   125 0000016B 66696C652E         
   126 0000018B 0A00                    db LF, NULL
   127                                 
   128 0000018D 0000000000000000       rdFileDescriptor dq 0
   129                                 
   130                                 
   131                                 
   132                                 
   133                                 
   134                                 BUFFSIZE equ 500000
   135                                 
   136                                 SKIP_LINES equ 5
   137                                 SKIP_CHARS equ 6
   138                                 
   139 00000195 01                     nextCharIsFirst db TRUE
   140 00000196 00000000               skipLineCount dd 0
   141 0000019A 00000000               skipCharCount dd 0
   142 0000019E 00                     gotDigit db FALSE
   143 0000019F 00                     fDigit db 0
   144 000001A0 00                     chr db 0
   145                                 
   146 000001A1 20A1070000000000       bfMax dq BUFFSIZE
   147 000001A9 20A1070000000000       curr dq BUFFSIZE
   148                                 
   149 000001B1 00                     wasEOF db FALSE
   150                                 
   151 000001B2 4572726F7220726561-    errFileRead db "Error reading input file."
   152 000001B2 64696E6720696E7075-
   153 000001B2 742066696C652E     
   154 000001CB 50726F6772616D2074-     db "Program terminated."
   155 000001CB 65726D696E61746564-
   156 000001CB 2E                 
   157 000001DE 0A00                    db LF, NULL
   158                                 
   159                                 
   160                                 
   161                                 
   162                                 SCALE1 equ 100
   163                                 SCALE2 equ 1000
   164                                 SCALE3 equ 2500
   165                                 SCALE4 equ 5000
   166                                 
   167 000001E0 64000000               scale dd SCALE1
   168 000001E4 00000000               totalCnt dd 0
   169 000001E8 00000000               currCount dd 0
   170 000001EC 00000000               starCount dd 0
   171                                 
   172 000001F0 03000000               weight dd 3
   173                                 
   174 000001F4 4572726F7220777269-    errFileWrite db "Error writting output file."
   175 000001F4 7474696E67206F7574-
   176 000001F4 7075742066696C652E 
   177 0000020F 0A00                    db LF, NULL
   178                                 
   179 00000211 0A4353203231382042-    graphHeader db LF, "CS 218 Benfords Law", LF
   180 00000211 656E666F726473204C-
   181 00000211 61770A             
   182 00000226 546573742052657375-     db "Test Results", LF, LF, NULL
   183 00000226 6C74730A0A00       
   184                                 
   185 00000235 546F74616C20446174-    graphLine1 db "Total Data Points: "
   186 00000235 6120506F696E74733A-
   187 00000235 20                 
   188 00000248 202020202020202020-    tStr1 db "                 ", LF, LF, NULL
   189 00000248 20202020202020200A-
   190 00000248 0A00               
   191                                 
   192                                 DIGITS_SIZE equ 15
   193                                 STARS_SIZE equ 50
   194                                 
   195 0000025C 2020                   graphLine2 db "  "
   196 0000025E 78                     index2 db "x"
   197 0000025F 2020                    db "  "
   198 00000261 2020202020202020       num2 db "        "
   199 00000269 7C                      db "|"
   200 0000026A 202020202020202020-    stars2 db "                              "
   201 0000026A 202020202020202020-
   202 0000026A 202020202020202020-
   203 0000026A 202020             
   204 00000288 202020202020202020-     db "                     "
   205 00000288 202020202020202020-
   206 00000288 202020             
   207 0000029D 0A00                    db LF, NULL
   208                                 
   209 0000029F 202020202020202020-    graphLine3 db "               ----------------------------------------------"
   210 0000029F 2020202020202D2D2D-
   211 0000029F 2D2D2D2D2D2D2D2D2D-
   212 0000029F 2D2D2D2D2D2D2D2D2D-
   213 0000029F 2D2D2D2D2D2D2D2D2D-
   214 0000029F 2D2D2D2D2D2D2D2D2D-
   215 0000029F 2D2D2D2D2D2D2D     
   216 000002DC 0A0A00                  db LF, LF, NULL
   217                                 
   218                                 
   219                                 
   220                                 
   221                                 [section .bss]
   222                                 
   223 00000000 <gap>                  buff resb BUFFSIZE+1
   224                                 
   225                                 
   226                                 
   227                                 
   228                                 [section .text]
   229                                 
   230                                 
   231                                 
   232                                 
   233                                 
   234                                 
   235                                 
   236                                 
   237                                 
   238                                 
   239                                 
   240                                 
   241                                 
   242                                 
   243                                 
   244                                 
   245                                 
   246                                 
   247                                 
   248                                 
   249                                 
   250                                 
   251                                 
   252                                 
   253                                 
   254                                 
   255                                 [global getArguments]
   256                                 getArguments:
   257                                 
   258 00000000 53                      push rbx
   259 00000001 4154                    push r12
   260 00000003 4155                    push r13
   261 00000005 4156                    push r14
   262                                 
   263 00000007 4989F4                  mov r12, rsi
   264 0000000A 4989D5                  mov r13, rdx
   265 0000000D 4989CE                  mov r14, rcx
   266                                 
   267                                 
   268 00000010 4883FF01                cmp rdi, 1
   269 00000014 0F8408010000            je usage
   270                                 
   271                                 
   272 0000001A 4883FF07                cmp rdi, 7
   273 0000001E 0F8F16010000            jg many
   274                                 
   275                                 
   276 00000024 4883FF07                cmp rdi, 7
   277 00000028 0F8C24010000            jl few
   278                                 
   279                                 
   280 0000002E 498B5C2408              mov rbx, qword[r12+8]
   281 00000033 803B2D                  cmp byte[rbx], "-"
   282 00000036 0F852E010000            jne invalidInputSpecifier
   283                                 
   284 0000003C 48FFC3                  inc rbx
   285 0000003F 803B69                  cmp byte[rbx], "i"
   286 00000042 0F8522010000            jne invalidInputSpecifier
   287                                 
   288 00000048 48FFC3                  inc rbx
   289 0000004B 803B00                  cmp byte[rbx], NULL
   290 0000004E 0F8516010000            jne invalidInputSpecifier
   291                                 
   292                                 
   293 00000054 48C7C002000000          mov rax, SYS_open
   294 0000005B 498B7C2410              mov rdi, qword[r12+16]
   295 00000060 48C7C600000000          mov rsi, O_RDONLY
   296 00000067 0F05                    syscall
   297                                 
   298 00000069 4883F800                cmp rax, 0
   299 0000006D 0F8C0F010000            jl errorOnInputFile
   300                                 
   301 00000073 49894500                mov qword[r13], rax
   302 00000077 48890425[00000000]      mov qword[rdFileDescriptor], rax
   303                                 
   304                                 
   305 0000007F 498B5C2418              mov rbx, qword[r12+24]
   306 00000084 803B2D                  cmp byte[rbx], "-"
   307 00000087 0F850D010000            jne invalidOutputSpecifier
   308                                 
   309 0000008D 48FFC3                  inc rbx
   310 00000090 803B6F                  cmp byte[rbx], "o"
   311 00000093 0F8501010000            jne invalidOutputSpecifier
   312                                 
   313 00000099 48FFC3                  inc rbx
   314 0000009C 803B00                  cmp byte[rbx], NULL
   315 0000009F 0F85F5000000            jne invalidOutputSpecifier
   316                                 
   317                                 
   318 000000A5 48C7C055000000          mov rax, SYS_creat
   319 000000AC 498B7C2420              mov rdi, qword[r12+32]
   320 000000B1 48C7C680010000          mov rsi, S_IRUSR | S_IWUSR
   321 000000B8 0F05                    syscall
   322                                 
   323 000000BA 4883F800                cmp rax, 0
   324 000000BE 0F8CEB000000            jl errorOnOutputFile
   325                                 
   326 000000C4 498906                  mov qword[r14], rax
   327                                 
   328 000000C7 48C7C002000000          mov rax, SYS_open
   329 000000CE 498B7C2420              mov rdi, qword[r12+32]
   330 000000D3 48C7C600000000          mov rsi, O_RDONLY
   331 000000DA 0F05                    syscall
   332                                 
   333 000000DC 4883F800                cmp rax, 0
   334 000000E0 0F8CC9000000            jl errorOnOutputFile
   335                                 
   336                                 
   337 000000E6 498B5C2428              mov rbx, qword[r12+40]
   338 000000EB 803B2D                  cmp byte[rbx], "-"
   339 000000EE 0F85D0000000            jne invalidDisplaySpecifier
   340                                 
   341 000000F4 48FFC3                  inc rbx
   342 000000F7 803B64                  cmp byte[rbx], "d"
   343 000000FA 0F85C4000000            jne invalidDisplaySpecifier
   344                                 
   345 00000100 48FFC3                  inc rbx
   346 00000103 803B00                  cmp byte[rbx], NULL
   347 00000106 0F85B8000000            jne invalidDisplaySpecifier
   348                                 
   349                                 
   350 0000010C 498B5C2430              mov rbx, qword[r12+48]
   351                                 
   352                                 
   353 00000111 803B54                  cmp byte[rbx], 0x54
   354 00000114 0F84BF000000            je displayTrue
   355                                 
   356 0000011A 803B46                  cmp byte[rbx], 0x46
   357 0000011D 0F84D2000000            je displayFalse
   358                                 
   359                                 
   360                                 
   361 00000123 E9EA000000              jmp invalidDisplayOption
   362                                 
   363                                 
   364                                  usage:
   365 00000128 48C7C7[00000000]        mov rdi, usageMsg
   366 0000012F E81A050000              call printString
   367 00000134 48C7C000000000          mov rax, FALSE
   368 0000013B E9E7000000              jmp argsDone
   369                                 
   370                                  many:
   371 00000140 48C7C7[00000000]        mov rdi, errMany
   372 00000147 E802050000              call printString
   373 0000014C 48C7C000000000          mov rax, FALSE
   374 00000153 E9CF000000              jmp argsDone
   375                                 
   376                                  few:
   377 00000158 48C7C7[00000000]        mov rdi, errFew
   378 0000015F E8EA040000              call printString
   379 00000164 48C7C000000000          mov rax, FALSE
   380 0000016B E9B7000000              jmp argsDone
   381                                 
   382                                  invalidInputSpecifier:
   383 00000170 48C7C7[00000000]        mov rdi, errISpec
   384 00000177 E8D2040000              call printString
   385 0000017C 48C7C000000000          mov rax, FALSE
   386 00000183 E99F000000              jmp argsDone
   387                                 
   388                                  errorOnInputFile:
   389 00000188 48C7C7[00000000]        mov rdi, errOpenIn
   390 0000018F E8BA040000              call printString
   391 00000194 48C7C000000000          mov rax, FALSE
   392 0000019B E987000000              jmp argsDone
   393                                 
   394                                  invalidOutputSpecifier:
   395 000001A0 48C7C7[00000000]        mov rdi, errOSpec
   396 000001A7 E8A2040000              call printString
   397 000001AC 48C7C000000000          mov rax, FALSE
   398 000001B3 EB75                    jmp argsDone
   399                                 
   400                                  errorOnOutputFile:
   401 000001B5 48C7C7[00000000]        mov rdi, errOpenOut
   402 000001BC E88D040000              call printString
   403 000001C1 48C7C000000000          mov rax, FALSE
   404 000001C8 EB60                    jmp argsDone
   405                                 
   406                                  invalidDisplaySpecifier:
   407 000001CA 48C7C7[00000000]        mov rdi, errDSpec
   408 000001D1 E878040000              call printString
   409 000001D6 48C7C000000000          mov rax, FALSE
   410 000001DD EB4B                    jmp argsDone
   411                                 
   412                                  displayTrue:
   413 000001DF 49C70001000000          mov qword[r8], TRUE
   414 000001E6 48C7C001000000          mov rax, TRUE
   415 000001ED 488B1C25[00000000]      mov rbx, qword[rdFileDescriptor]
   416 000001F5 49895D00                mov qword[r13], rbx
   417 000001F9 EB2F                    jmp argsDone
   418                                 
   419                                  displayFalse:
   420 000001FB 49C70000000000          mov qword[r8], FALSE
   421 00000202 488B1C25[00000000]      mov rbx, qword[rdFileDescriptor]
   422 0000020A 49895D00                mov qword[r13], rbx
   423 0000020E 48C7C001000000          mov rax, TRUE
   424 00000215 EB13                    jmp argsDone
   425                                 
   426                                  invalidDisplayOption:
   427 00000217 48C7C7[00000000]        mov rdi, errTF
   428 0000021E E82B040000              call printString
   429 00000223 48C7C000000000          mov rax, FALSE
   430 0000022A EBFE                    jmp argsDone
   431                                 
   432                                  argsDone:
   433                                 
   434 0000022C 415E                    pop r14
   435 0000022E 415D                    pop r13
   436 00000230 415C                    pop r12
   437 00000232 5B                      pop rbx
   438 00000233 C3                     ret
   439                                 
   440                                 
   441                                 
   442                                 
   443                                 
   444                                 
   445                                 
   446                                 
   447                                 
   448                                 
   449                                 
   450                                 
   451                                 
   452                                 
   453                                 
   454                                 
   455                                 
   456                                 
   457                                 
   458                                 
   459                                 
   460                                 
   461                                 
   462                                 
   463                                 [global int2octal]
   464                                 int2octal:
   465                                 
   466 00000234 4154                    push r12
   467 00000236 4155                    push r13
   468                                 
   469 00000238 49C7C408000000          mov r12, 8
   470 0000023F 48C7C100000000          mov rcx, 0
   471 00000246 4989F5                  mov r13, rsi
   472                                 
   473                                 
   474 00000249 4889F8                  mov rax, rdi
   475                                 
   476                                  convertLp:
   477 0000024C 48C7C200000000          mov rdx, 0
   478 00000253 49F7F4                  div r12
   479                                 
   480 00000256 52                      push rdx
   481 00000257 48FFC1                  inc rcx
   482                                 
   483                                 
   484 0000025A 4883F800                cmp rax, 0
   485 0000025E 7400                    je cvtPushDone
   486                                 
   487 00000260 EBE8                    jmp convertLp
   488                                 
   489                                  cvtPushDone:
   490                                 
   491                                 
   492 00000262 48C7C200000000          mov rdx, 0
   493                                  popLp:
   494                                 
   495 00000269 415C                    pop r12
   496 0000026B 48FFC9                  dec rcx
   497 0000026E 4983C430                add r12, "0"
   498 00000272 4588641500              mov byte[r13+rdx], r12b
   499                                 
   500 00000277 48FFC2                  inc rdx
   501                                 
   502 0000027A 4883F900                cmp rcx, 0
   503 0000027E 7400                    je convertDone
   504 00000280 EBE5                    jmp popLp
   505                                 
   506                                  convertDone:
   507                                 
   508                                 
   509 00000282 48C7C001000000          mov rax, TRUE
   510                                 
   511                                 
   512 00000289 415D                    pop r13
   513 0000028B 415C                    pop r12
   514                                 
   515 0000028D C3                     ret
   516                                 
   517                                 
   518                                 
   519                                 
   520                                 
   521                                 
   522                                 
   523                                 
   524                                 
   525                                 
   526                                 
   527                                 
   528                                 
   529                                 
   530                                 
   531                                 
   532                                 
   533                                 
   534                                 
   535                                 
   536                                 [global countDigits]
   537                                 countDigits:
   538                                 
   539 0000028E 4154                    push r12
   540 00000290 4155                    push r13
   541                                 
   542 00000292 4989FC                  mov r12, rdi
   543 00000295 4989F5                  mov r13, rsi
   544                                 
   545                                  mainLp:
   546                                 
   547 00000298 488B3C25[00000000]      mov rdi, qword[curr]
   548 000002A0 488B3425[00000000]      mov rsi, qword[bfMax]
   549                                 
   550 000002A8 4839F7                  cmp rdi, rsi
   551 000002AB 7C5D                    jl endMainLp
   552                                 
   553 000002AD 803C25[00000000]01      cmp byte[wasEOF], TRUE
   554 000002B5 0F8446010000            je exitCount
   555                                 
   556                                 
   557                                 
   558 000002BB 48C7C000000000          mov rax, SYS_read
   559 000002C2 4C89E7                  mov rdi, r12
   560 000002C5 48C7C6[00000000]        mov rsi, buff
   561 000002CC 48C7C220A10700          mov rdx, BUFFSIZE
   562 000002D3 0F05                    syscall
   563                                 
   564                                 
   565                                 
   566 000002D5 4883F800                cmp rax, 0
   567 000002D9 0F8C14010000            jl errOnRead
   568                                 
   569                                 
   570 000002DF 83F800                  cmp eax, 0
   571 000002E2 0F8419010000            je exitCount
   572                                 
   573                                 
   574 000002E8 3D20A10700              cmp eax, BUFFSIZE
   575 000002ED 7C00                    jl reachedEndOfFile
   576                                 
   577 000002EF EB0D                    jmp notEndOfFile
   578                                 
   579                                  reachedEndOfFile:
   580                                 
   581                                 
   582 000002F1 C60425[00000000]01      mov byte[wasEOF], TRUE
   583 000002F9 890425[00000000]        mov dword[bfMax], eax
   584                                 
   585                                  notEndOfFile:
   586                                 
   587                                 
   588                                 
   589 00000300 48C70425[00000000]-     mov qword[curr], 0
   590 00000300 00000000           
   591                                 
   592                                 
   593                                  endMainLp:
   594                                 
   595                                 
   596                                 
   597 0000030C 488B3425[00000000]      mov rsi, qword[curr]
   598 00000314 8A96[00000000]          mov dl, byte[buff+rsi]
   599 0000031A 881425[00000000]        mov byte[chr], dl
   600                                 
   601                                 
   602                                 
   603                                 
   604 00000321 833C25[00000000]05      cmp dword[skipLineCount], SKIP_LINES
   605 00000329 7D1C                    jge skipLineDone
   606                                 
   607 0000032B 803C25[00000000]0A      cmp byte[chr], LF
   608 00000333 7505                    jne noLineCnt
   609 00000335 FF0425[00000000]        inc dword[skipLineCount]
   610                                  noLineCnt:
   611                                 
   612                                 
   613 0000033C 48FF0425[00000000]      inc qword[curr]
   614                                 
   615 00000344 E94AFFFFFF              jmp mainLp
   616                                 
   617                                  skipLineDone:
   618                                 
   619                                 
   620                                 
   621 00000349 833C25[00000000]06      cmp dword[skipCharCount], SKIP_CHARS
   622 00000351 7F12                    jg skipCharDone
   623                                 
   624                                 
   625                                 
   626 00000353 FF0425[00000000]        inc dword[skipCharCount]
   627                                 
   628                                 
   629 0000035A 48FF0425[00000000]      inc qword[curr]
   630                                 
   631                                 
   632 00000362 E92CFFFFFF              jmp mainLp
   633                                 
   634                                  skipCharDone:
   635                                 
   636                                 
   637 00000367 803C25[00000000]20      cmp byte[chr], 0x20
   638 0000036F 750B                    jne skipSpace
   639                                 
   640                                 
   641 00000371 48FF0425[00000000]      inc qword[curr]
   642 00000379 E915FFFFFF              jmp mainLp
   643                                 
   644                                  skipSpace:
   645                                 
   646                                 
   647 0000037E 803C25[00000000]01      cmp byte[gotDigit], TRUE
   648 00000386 7438                    je notFirstDigit
   649                                 
   650                                 
   651 00000388 48C7C000000000          mov rax, 0
   652 0000038F 8A0425[00000000]        mov al, byte[chr]
   653 00000396 2C30                    sub al, "0"
   654 00000398 880425[00000000]        mov byte[fDigit], al
   655                                 
   656                                 
   657 0000039F 418344850001            add dword[r13+rax*4], 1
   658                                 
   659 000003A5 48FF0425[00000000]      inc qword[curr]
   660 000003AD 48FF0425[00000000]      inc qword[totalCnt]
   661                                 
   662                                 
   663 000003B5 C60425[00000000]01      mov byte[gotDigit], TRUE
   664 000003BD E9D1FEFFFF              jmp mainLp
   665                                 
   666                                  notFirstDigit:
   667                                 
   668                                 
   669 000003C2 803C25[00000000]0A      cmp byte[chr], LF
   670 000003CA 751E                    jne notNewLine
   671                                 
   672 000003CC C70425[00000000]00-     mov dword[skipCharCount], 0
   673 000003CC 000000             
   674                                 
   675                                 
   676 000003D7 C60425[00000000]00      mov byte[gotDigit], FALSE
   677                                 
   678 000003DF 48FF0425[00000000]      inc qword[curr]
   679 000003E7 E9A7FEFFFF              jmp mainLp
   680                                 
   681                                  notNewLine:
   682                                 
   683                                 
   684 000003EC 48FF0425[00000000]      inc qword[curr]
   685 000003F4 E99AFEFFFF              jmp mainLp
   686                                 
   687                                  errOnRead:
   688                                 
   689 000003F9 48C7C7[00000000]        mov rdi, errFileRead
   690 00000400 E849020000              call printString
   691 00000405 EBFE                    jmp exitCount
   692                                 
   693                                  exitCount:
   694                                 
   695                                 
   696 00000407 415D                    pop r13
   697 00000409 415C                    pop r12
   698                                 
   699                                 
   700 0000040B C3                     ret
   701                                 
   702                                 
   703                                 
   704                                 
   705                                 
   706                                 
   707                                 
   708                                 
   709                                 
   710                                 
   711                                 
   712                                 
   713                                 
   714                                 
   715                                 
   716                                 
   717                                 
   718                                 
   719                                 
   720                                 [global showGraph]
   721                                 showGraph:
   722                                 
   723                                 
   724 0000040C 4154                    push r12
   725 0000040E 4155                    push r13
   726 00000410 4156                    push r14
   727                                 
   728 00000412 4989FC                  mov r12, rdi
   729 00000415 4989F5                  mov r13, rsi
   730 00000418 4989D6                  mov r14, rdx
   731                                 
   732                                 
   733                                 
   734                                 
   735 0000041B 488B0425[00000000]      mov rax, qword[totalCnt]
   736 00000423 483DA0860100            cmp rax, 100000
   737 00000429 7C10                    jl scaleOne
   738                                 
   739 0000042B 483D20A10700            cmp rax, 500000
   740 00000431 7C15                    jl scaleTwo
   741                                 
   742 00000433 483D40420F00            cmp rax, 1000000
   743 00000439 7C1A                    jl scaleThree
   744                                 
   745 0000043B EB25                    jmp scaleFour
   746                                 
   747                                  scaleOne:
   748 0000043D C70425[00000000]64-     mov dword[scale], SCALE1
   749 0000043D 000000             
   750 00000448 EB25                    jmp scaleDone
   751                                 
   752                                  scaleTwo:
   753 0000044A C70425[00000000]E8-     mov dword[scale], SCALE2
   754 0000044A 030000             
   755 00000455 EB18                    jmp scaleDone
   756                                 
   757                                  scaleThree:
   758 00000457 C70425[00000000]C4-     mov dword[scale], SCALE3
   759 00000457 090000             
   760 00000462 EB0B                    jmp scaleDone
   761                                 
   762                                  scaleFour:
   763 00000464 C70425[00000000]88-     mov dword[scale], SCALE4
   764 00000464 130000             
   765 0000046F EBFE                    jmp scaleDone
   766                                 
   767                                  scaleDone:
   768                                 
   769                                 
   770 00000471 4C89E7                  mov rdi, r12
   771 00000474 48C7C6[00000000]        mov rsi, graphHeader
   772 0000047B E87F010000              call writeString
   773                                 
   774                                 
   775 00000480 4983FE00                cmp r14, FALSE
   776 00000484 740A                    je noPrintHeader
   777                                 
   778 00000486 48C7C7[00000000]        mov rdi, graphHeader
   779 0000048D E8BC010000              call printString
   780                                 
   781                                  noPrintHeader:
   782                                 
   783 00000492 488B3C25[00000000]      mov rdi, qword[totalCnt]
   784 0000049A 48C7C6[00000000]        mov rsi, tStr1
   785 000004A1 E889FDFFFF              call int2octal
   786                                 
   787 000004A6 4C89E7                  mov rdi, r12
   788 000004A9 48C7C6[00000000]        mov rsi, graphLine1
   789 000004B0 E84A010000              call writeString
   790                                 
   791                                 
   792 000004B5 4983FE00                cmp r14, FALSE
   793 000004B9 740A                    je noPrintDataPoints
   794                                 
   795 000004BB 48C7C7[00000000]        mov rdi, graphLine1
   796 000004C2 E887010000              call printString
   797                                 
   798                                  noPrintDataPoints:
   799                                 
   800                                 
   801 000004C7 48C7C600000000          mov rsi, 0
   802                                  clearNumTwo:
   803 000004CE C686[00000000]20        mov byte[num2+rsi], 0x20
   804 000004D5 48FFC6                  inc rsi
   805 000004D8 4883FE0A                cmp rsi, 10
   806 000004DC 75EE                    jne clearNumTwo
   807                                 
   808                                 
   809                                 
   810 000004DE 49C7C200000000          mov r10, 0
   811 000004E5 49C7C100000000          mov r9, 0
   812 000004EC 49C7C030000000          mov r8, "0"
   813 000004F3 48C7C700000000          mov rdi, 0
   814                                  graphLp:
   815                                 
   816 000004FA 44880425[00000000]      mov byte[index2], r8b
   817                                 
   818 00000502 478B4C9500              mov r9d, dword[r13+r10*4]
   819 00000507 44890C25[00000000]      mov dword[currCount], r9d
   820                                 
   821                                 
   822 0000050F 8B3C25[00000000]        mov edi, dword[currCount]
   823 00000516 48C7C6[00000000]        mov rsi, num2
   824 0000051D E80DFDFFFF              call int2octal
   825                                 
   826                                 
   827 00000522 8B0425[00000000]        mov eax, dword[currCount]
   828 00000529 99                      cdq
   829 0000052A F73425[00000000]        div dword[scale]
   830 00000531 83F800                  cmp eax, 0
   831 00000534 7430                    je zeroStars
   832                                 
   833                                 
   834 00000536 83F82C                  cmp eax, 44
   835 00000539 7C03                    jl notMaxStar
   836                                 
   837 0000053B B82C000000              mov eax, 44
   838                                 
   839                                  notMaxStar:
   840                                 
   841 00000540 890425[00000000]        mov dword[starCount], eax
   842 00000547 FF0425[00000000]        inc dword[starCount]
   843                                 
   844                                 
   845 0000054E 48C7C600000000          mov rsi, 0
   846                                  starLp:
   847                                 
   848 00000555 C686[00000000]2A        mov byte[stars2+rsi], "*"
   849 0000055C 48FFC6                  inc rsi
   850 0000055F 3B3425[00000000]        cmp esi, dword[starCount]
   851 00000566 75EB                    jne starLp
   852                                 
   853                                  zeroStars:
   854                                 
   855 00000568 C60425[00000000]7C      mov byte[stars2], "|"
   856                                 
   857 00000570 4C89E7                  mov rdi, r12
   858 00000573 48C7C6[00000000]        mov rsi, graphLine2
   859 0000057A E880000000              call writeString
   860                                 
   861                                 
   862 0000057F 4983FE00                cmp r14, FALSE
   863 00000583 740A                    je noPrintStars
   864                                 
   865 00000585 48C7C7[00000000]        mov rdi, graphLine2
   866 0000058C E8BD000000              call printString
   867                                 
   868                                  noPrintStars:
   869                                 
   870                                 
   871 00000591 48C7C600000000          mov rsi, 0
   872 00000598 833C25[00000000]00      cmp dword[starCount], 0
   873 000005A0 7411                    je noStars
   874                                 
   875                                  clearStar:
   876 000005A2 C686[00000000]20        mov byte[stars2+rsi], 0x20
   877 000005A9 48FFC6                  inc rsi
   878 000005AC 3B3425[00000000]        cmp esi, dword[starCount]
   879 000005B3 75EB                    jne clearStar
   880                                 
   881                                 
   882                                  noStars:
   883                                 
   884                                 
   885 000005B5 48C7C600000000          mov rsi, 0
   886                                  clearNum2:
   887 000005BC C686[00000000]20        mov byte[num2+rsi], 0x20
   888 000005C3 48FFC6                  inc rsi
   889 000005C6 4883FE07                cmp rsi, 7
   890 000005CA 75EE                    jne clearNum2
   891                                 
   892                                 
   893                                 
   894 000005CC 49FFC0                  inc r8
   895 000005CF 49FFC2                  inc r10
   896 000005D2 4983FA0A                cmp r10, 10
   897 000005D6 0F8518FFFFFF            jne graphLp
   898                                 
   899 000005DC 4C89E7                  mov rdi, r12
   900 000005DF 48C7C6[00000000]        mov rsi, graphLine3
   901 000005E6 E814000000              call writeString
   902                                 
   903                                 
   904 000005EB 4983FE00                cmp r14, FALSE
   905 000005EF 740A                    je noPrintLast
   906                                 
   907 000005F1 48C7C7[00000000]        mov rdi, graphLine3
   908 000005F8 E851000000              call printString
   909                                 
   910                                  noPrintLast:
   911                                 
   912 000005FD 415E                    pop r14
   913 000005FF 415D                    pop r13
   914 00000601 415C                    pop r12
   915 00000603 C3                     ret
   916                                 
   917                                 
   918                                 
   919                                 
   920                                 
   921                                 
   922                                 
   923                                 
   924                                 
   925                                 
   926                                 
   927                                 
   928                                 
   929                                 
   930                                 
   931                                 
   932                                 
   933                                 
   934                                 [global writeString]
   935                                 writeString:
   936                                 
   937 00000604 4154                    push r12
   938 00000606 4155                    push r13
   939 00000608 4156                    push r14
   940                                 
   941 0000060A 4989FC                  mov r12, rdi
   942 0000060D 4989F5                  mov r13, rsi
   943                                 
   944                                 
   945 00000610 49C7C600000000          mov r14, 0
   946                                 
   947                                 
   948                                  countChar:
   949                                 
   950 00000617 803E00                  cmp byte[rsi], NULL
   951 0000061A 7406                    je charCountDone
   952 0000061C 49FFC6                  inc r14
   953 0000061F 48FFC6                  inc rsi
   954 00000622 EBF1                    jmp countChar
   955                                  charCountDone:
   956                                 
   957                                 
   958 00000624 48C7C001000000          mov rax, SYS_write
   959 0000062B 4C89E7                  mov rdi, r12
   960 0000062E 4C89EE                  mov rsi, r13
   961 00000631 4C89F2                  mov rdx, r14
   962 00000634 0F05                    syscall
   963                                 
   964 00000636 4883F800                cmp rax, 0
   965 0000063A 7C00                    jl errorOnWrite
   966                                 
   967 0000063C EB0C                    jmp endWrite
   968                                 
   969                                  errorOnWrite:
   970                                 
   971 0000063E 48C7C7[00000000]        mov rdi, errFileWrite
   972 00000645 E804000000              call printString
   973 0000064A EBFE                    jmp endWrite
   974                                 
   975                                  endWrite:
   976                                 
   977 0000064C 415E                    pop r14
   978 0000064E 415D                    pop r13
   979 00000650 415C                    pop r12
   980 00000652 C3                     ret
   981                                 
   982                                 
   983                                 
   984                                 
   985                                 
   986                                 
   987                                 
   988                                 
   989                                 
   990                                 
   991                                 
   992                                 
   993                                 
   994                                 
   995                                 
   996                                 
   997                                 
   998                                 
   999                                 
  1000                                 [global printString]
  1001                                 printString:
  1002                                 
  1003                                 
  1004                                 
  1005                                 
  1006 00000653 48C7C200000000          mov rdx, 0
  1007                                 strCountLoop:
  1008 0000065A 803C1700                cmp byte [rdi+rdx], NULL
  1009 0000065E 7403                    je strCountLoopDone
  1010 00000660 48FFC2                  inc rdx
  1011 00000663 EBF3                    jmp strCountLoop
  1012                                 strCountLoopDone:
  1013 00000665 4883FA00                cmp rdx, 0
  1014 00000669 7411                    je printStringDone
  1015                                 
  1016                                 
  1017                                 
  1018                                 
  1019 0000066B 48C7C001000000          mov rax, SYS_write
  1020 00000672 4889FE                  mov rsi, rdi
  1021 00000675 48C7C701000000          mov rdi, STDOUT
  1022                                 
  1023 0000067C 0F05                    syscall
  1024                                 
  1025                                 
  1026                                 
  1027                                 
  1028                                 printStringDone:
  1029 0000067E C3                      ret
  1030                                 
  1031                                 
  1032                                 

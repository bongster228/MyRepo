     1                                 %line 1+1 ast05.asm
     2                                 
     3                                 
     4                                 [section .data]
     5                                 
     6                                 
     7                                 
     8                                 
     9                                 NULL equ 0
    10                                 
    11                                 TRUE equ 1
    12                                 FALSE equ 0
    13                                 
    14                                 EXIT_SUCCESS equ 0
    15                                 
    16                                 SYS_exit equ 60
    17                                 
    18                                 
    19                                 
    20                                 
    21 00000000 0A000E000D00250036-    sides dw 10, 14, 13, 37, 54
    22 00000000 00                 
    23 0000000A 0E001D004000430022-     dw 14, 29, 64, 67, 34
    24 0000000A 00                 
    25 00000014 1F000D0014003D0024-     dw 31, 13, 20, 61, 36
    26 00000014 00                 
    27 0000001E 0E0035002C0013002A-     dw 14, 53, 44, 19, 42
    28 0000001E 00                 
    29 00000028 2C0034001F002A0038-     dw 44, 52, 31, 42, 56
    30 00000028 00                 
    31 00000032 0F00180024004B002E-     dw 15, 24, 36, 75, 46
    32 00000032 00                 
    33 0000003C 1B00290035003E000A-     dw 27, 41, 53, 62, 10
    34 0000003C 00                 
    35 00000046 2100040049001F000F-     dw 33, 4, 73, 31, 15
    36 00000046 00                 
    37 00000050 05000B001600210046-     dw 5, 11, 22, 33, 70
    38 00000050 00                 
    39 0000005A 0F0017000F003F001A-     dw 15, 23, 15, 63, 26
    40 0000005A 00                 
    41 00000064 10000D004000350041-     dw 16, 13, 64, 53, 65
    42 00000064 00                 
    43 0000006E 1A000C003900430022-     dw 26, 12, 57, 67, 34
    44 0000006E 00                 
    45 00000078 180021000A003D000F-     dw 24, 33, 10, 61, 15
    46 00000078 00                 
    47 00000082 260049001D0011005D-     dw 38, 73, 29, 17, 93
    48 00000082 00                 
    49 0000008C 400049004A00170038-     dw 64, 73, 74, 23, 56
    50 0000008C 00                 
    51 00000096 0900080004000A000F-     dw 9, 8, 4, 10, 15
    52 00000096 00                 
    53 000000A0 0D0017003500430023-     dw 13, 23, 53, 67, 35
    54 000000A0 00                 
    55 000000AA 0E0022000D00470051-     dw 14, 34, 13, 71, 81
    56 000000AA 00                 
    57 000000B4 11000E001100190035-     dw 17, 14, 17, 25, 53
    58 000000B4 00                 
    59 000000BE 170049000F0006000D-     dw 23, 73, 15, 6, 13
    60 000000BE 00                 
    61                                 
    62 000000C8 64000000               length dd 100
    63                                 
    64 000000CC 0000                   caMin dw 0
    65 000000CE 0000                   caMid dw 0
    66 000000D0 0000                   caMax dw 0
    67 000000D2 00000000               caSum dd 0
    68 000000D6 0000                   caAve dw 0
    69                                 
    70 000000D8 00000000               cvMin dd 0
    71 000000DC 00000000               cvMid dd 0
    72 000000E0 00000000               cvMax dd 0
    73 000000E4 00000000               cvSum dd 0
    74 000000E8 00000000               cvAve dd 0
    75                                 
    76                                 
    77                                 
    78                                 
    79 000000EC 0600                   cubeSides dw 6
    80 000000EE 0000                   currArea dw 0
    81 000000F0 0000                   midIndex dw 0
    82 000000F2 00000000               currVol dd 0
    83                                 
    84                                 
    85                                 
    86                                 
    87                                 [section .bss]
    88                                 
    89 00000000 <gap>                  cubeAreas resw 100
    90 000000C8 <gap>                  cubeVolumes resd 100
    91                                 
    92                                 
    93                                 [section .text]
    94                                 [global _start]
    95                                 _start:
    96                                 
    97                                 
    98                                 
    99                                 
   100 00000000 48C7C000000000         mov rax, 0
   101 00000007 8B0C25[00000000]       mov ecx, dword[length]
   102 0000000E 49C7C0[00000000]       mov r8, sides
   103 00000015 49C7C100000000         mov r9, 0
   104                                 
   105                                 
   106                                 
   107                                 
   108                                 calcArea:
   109 0000001C 66418B00               mov ax, word[r8]
   110 00000020 66F7E0                 mul ax
   111 00000023 66F72425[00000000]     mul word[cubeSides]
   112 0000002B 6643898409[00000000]     mov word[cubeAreas+r9*2], ax
   113                                 
   114                                 
   115 00000034 4983C002               add r8, 2
   116 00000038 49FFC1                 inc r9
   117 0000003B 4139C9                 cmp r9d, ecx
   118 0000003E 72DA                   jb calcArea
   119                                 
   120                                 
   121                                 
   122                                 
   123 00000040 48C7C600000000         mov rsi, 0
   124 00000047 49C7C0[00000000]       mov r8, cubeAreas
   125 0000004E 48C7C100000000         mov rcx, 0
   126 00000055 8B0C25[00000000]       mov ecx, dword[length]
   127                                 
   128                                 sumLoop:
   129 0000005C 66418B30               mov si, word[r8]
   130 00000060 0FB7F6                 movzx esi, si
   131 00000063 013425[00000000]       add dword[caSum], esi
   132                                 
   133 0000006A 4983C002               add r8, 2
   134 0000006E E2EA                   loop sumLoop
   135                                 
   136                                 
   137                                 
   138                                 
   139 00000070 49C7C0[00000000]       mov r8, cubeAreas
   140 00000077 66418B38               mov di, word[r8]
   141 0000007B 480FB7FF               movzx rdi, di
   142                                 
   143 0000007F 66893C25[00000000]     mov word[caMin], di
   144 00000087 66893C25[00000000]     mov word[caMax], di
   145 0000008F 48C7C100000000         mov rcx, 0
   146 00000096 8B0C25[00000000]       mov ecx, dword[length]
   147                                 
   148                                 
   149                                 
   150                                 minMaxLp:
   151 0000009D 66418B38               mov di, word[r8]
   152 000000A1 66393C25[00000000]     cmp word[caMin], di
   153 000000A9 7606                   jbe areaMinDone
   154 000000AB 66893C25[00000000]     mov word[caMin], di
   155                                 areaMinDone:
   156 000000B3 66393C25[00000000]     cmp word[caMax], di
   157 000000BB 7306                   jae areaMaxDone
   158 000000BD 66893C25[00000000]     mov word[caMax], di
   159                                 areaMaxDone:
   160 000000C5 4983C002               add r8, 2
   161 000000C9 E2D0                   loop minMaxLp
   162                                 
   163                                 
   164                                 
   165                                 
   166                                 
   167 000000CB 48C7C000000000         mov rax, 0
   168 000000D2 48C7C702000000         mov rdi, 2
   169 000000D9 8B0425[00000000]       mov eax, dword[length]
   170 000000E0 6641B80200             mov r8w, 2
   171 000000E5 6641F7F0               div r8w
   172 000000E9 66890425[00000000]     mov word[midIndex], ax
   173 000000F1 480FB7C0               movzx rax, ax
   174                                 
   175                                 
   176 000000F5 6683FA00               cmp dx, 0
   177 000000F9 7417                   je evenLength
   178                                 
   179 000000FB 49C7C200000000         mov r10, 0
   180 00000102 66448B9400[00000000]     mov r10w, word[cubeAreas+rax*2]
   181 0000010B 6644891425[00000000]     mov word[caMid], r10w
   182                                 
   183                                 
   184                                 evenLength:
   185 00000114 668B3425[00000000]     mov si, word[midIndex]
   186 0000011C 480FB7F6               movzx rsi, si
   187 00000120 668B8436[00000000]     mov ax, word[cubeAreas+rsi*2]
   188 00000128 48FFCE                 dec rsi
   189 0000012B 66038436[00000000]     add ax, word[cubeAreas+rsi*2]
   190 00000133 66BA0000               mov dx, 0
   191 00000137 6641F7F0               div r8w
   192 0000013B 66890425[00000000]     mov word[caMid], ax
   193                                 
   194                                 
   195                                 
   196                                 
   197 00000143 8B0425[00000000]       mov eax, dword[caSum]
   198 0000014A BA00000000             mov edx, 0
   199 0000014F F73425[00000000]       div dword[length]
   200 00000156 66890425[00000000]     mov word[caAve], ax
   201                                 
   202                                 
   203                                 
   204                                 
   205 0000015E 48C7C100000000         mov rcx, 0
   206 00000165 8B0C25[00000000]       mov ecx, dword[length]
   207 0000016C 48C7C700000000         mov rdi, 0
   208 00000173 49C7C000000000         mov r8, 0
   209                                 
   210                                 cubeVolLp:
   211                                 
   212 0000017A 4B0FB78400[00000000]     movzx rax, word[sides+r8*2]
   213 00000183 66F7E0                 mul ax
   214 00000186 6643F7A400[00000000]     mul word[sides+r8*2]
   215 0000018F 66890425[00000000]     mov word[currVol], ax
   216 00000197 66891425[02000000]     mov word[currVol+2], dx
   217                                 
   218 0000019F 8B3C25[00000000]       mov edi, dword[currVol]
   219 000001A6 42893C85[00000000]     mov dword[cubeVolumes+r8*4], edi
   220                                 
   221                                 
   222 000001AE 49FFC0                 inc r8
   223 000001B1 FFC9                   dec ecx
   224 000001B3 83F900                 cmp ecx, 0
   225 000001B6 75C0                   jne cubeVolLp
   226                                 
   227                                 
   228                                 
   229                                 
   230 000001B8 49C7C000000000         mov r8, 0
   231 000001BF 48C7C100000000         mov rcx, 0
   232 000001C6 8B0C25[00000000]       mov ecx, dword[length]
   233                                 
   234                                 sumVol:
   235 000001CD 428B3485[00000000]     mov esi, dword[cubeVolumes+r8*4]
   236 000001D5 013425[00000000]       add dword[cvSum], esi
   237 000001DC 49FFC0                 inc r8
   238 000001DF E2EA                   loop sumVol
   239                                 
   240                                 
   241                                 
   242                                 
   243 000001E1 49C7C200000000         mov r10, 0
   244 000001E8 48C7C100000000         mov rcx, 0
   245 000001EF 8B0C25[00000000]       mov ecx, dword[length]
   246                                 
   247 000001F6 8B3425[00000000]       mov esi, dword[cubeVolumes]
   248 000001FD 893425[00000000]       mov dword[cvMin], esi
   249 00000204 893425[00000000]       mov dword[cvMax], esi
   250                                 
   251                                 minMaxVol:
   252 0000020B 428B3495[00000000]     mov esi, dword[cubeVolumes+r10*4]
   253 00000213 393425[00000000]       cmp dword[cvMin], esi
   254 0000021A 7605                   jbe volMinDone
   255 0000021C 893425[00000000]       mov dword[cvMin], esi
   256                                 volMinDone:
   257 00000223 393425[00000000]       cmp dword[cvMax], esi
   258 0000022A 7305                   jae volMaxDone
   259 0000022C 893425[00000000]       mov dword[cvMax], esi
   260                                 volMaxDone:
   261                                 
   262 00000233 49FFC2                 inc r10
   263 00000236 E2D1                   loop minMaxVol
   264                                 
   265                                 
   266                                 
   267                                 
   268                                 
   269 00000238 48C7C000000000         mov rax, 0
   270 0000023F 8B0425[00000000]       mov eax, dword[length]
   271 00000246 48C7C600000000         mov rsi, 0
   272 0000024D BE02000000             mov esi, 2
   273 00000252 F7F6                   div esi
   274                                 
   275 00000254 66890425[00000000]     mov word[midIndex], ax
   276 0000025C 49C7C100000000         mov r9, 0
   277 00000263 66448B0C25[00000000]     mov r9w, word[midIndex]
   278                                 
   279 0000026C 468B048D[00000000]     mov r8d, dword[cubeVolumes+r9*4]
   280 00000274 44890425[00000000]     mov dword[cvMid], r8d
   281 0000027C 49FFC9                 dec r9
   282 0000027F 468B048D[00000000]     mov r8d, dword[cubeVolumes+r9*4]
   283 00000287 44010425[00000000]     add dword[cvMid], r8d
   284                                 
   285 0000028F 4489C0                 mov eax, r8d
   286 00000292 BE02000000             mov esi, 2
   287 00000297 F7F6                   div esi
   288 00000299 890425[00000000]       mov dword[cvMid], eax
   289                                 
   290                                 
   291                                 
   292 000002A0 BA00000000             mov edx, 0
   293 000002A5 8B0425[00000000]       mov eax, dword[cvSum]
   294 000002AC F73425[00000000]       div dword[length]
   295 000002B3 890425[00000000]       mov dword[cvAve], eax
   296                                 
   297                                 last:
   298 000002BA 48C7C03C000000          mov rax, SYS_exit
   299 000002C1 48C7C700000000          mov rdi, EXIT_SUCCESS
   300 000002C8 0F05                    syscall

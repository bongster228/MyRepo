     1                                 %line 1+1 ast01.asm
     2                                 
     3                                 
     4                                 %line 19+1 ast01.asm
     5                                 
     6                                 %line 92+1 ast01.asm
     7                                 
     8                                 
     9                                 
    10                                 
    11                                 
    12                                 
    13                                 
    14                                 [section .data]
    15                                 
    16                                 
    17                                 
    18                                 
    19                                 LF equ 10
    20                                 NULL equ 0
    21                                 
    22                                 
    23                                 TRUE equ 1
    24                                 FALSE equ 0
    25                                 
    26                                 EXIT_SUCCESS equ 0
    27                                 
    28                                 STDIN equ 0
    29                                 STDOUT equ 1
    30                                 STDERR equ 2
    31                                 
    32                                 SYS_read equ 0
    33                                 SYS_write equ 1
    34                                 SYS_open equ 2
    35                                 SYS_close equ 3
    36                                 SYS_fork equ 57
    37                                 SYS_exit equ 60
    38                                 SYS_creat equ 85
    39                                 SYS_time equ 201
    40                                 
    41                                 
    42                                 
    43 00000000 48656C6C6F20576F72-    message1 db "Hello World", LF, NULL
    44 00000000 6C640A00           
    45 0000000D 456E74657220416E73-    message2 db "Enter Answer: ", NULL
    46 0000000D 7765723A2000       
    47 0000001C 0A00                   newLine db LF, NULL
    48                                 
    49 0000001E 00                     inChar db 0
    50                                 STRLEN equ 50
    51 0000001F 456E74657220546578-    pmpt db "Enter Text: ", NULL
    52 0000001F 743A2000           
    53                                 
    54                                 
    55                                 
    56                                 
    57                                 
    58                                 
    59                                 
    60 0000002C 00000000                n1 dd 0
    61 00000030 0000                    n2w dw 0
    62 00000032 00000000                n3 dd 0
    63                                 
    64 00000036 00000000                res1 dd 0
    65 0000003A 00000000                res2 dd 0
    66 0000003E 00000000                res3 dd 0
    67 00000042 00000000                rem3 dd 0
    68                                 
    69 00000046 1F85EB51B81E0940        flt1 dq 3.14
    70 0000004E 8C4AEA0434D14A40        flt2 dq 53.6344
    71                                 
    72                                 
    73                                 
    74 00000056 060403FF02FD0507        list db 6,4,3,-1,2,-3,5,7
    75                                 
    76 0000005E 010002000300040005-     wLst dw 1, 2, 3, 4, 5, 6, 7, 8, 9, 10
    77 0000005E 000600070008000900-
    78 0000005E 0A00               
    79 00000072 010000000200000003-     arr dd 1,2,3,4,5,6,7,8,10
    80 00000072 000000040000000500-
    81 00000072 000006000000070000-
    82 00000072 00080000000A000000 
    83 00000096 0A000000                len dd 10
    84 0000009A 00000000                min dd 0
    85 0000009E 00000000                med1 dd 0
    86 000000A2 00000000                med2 dd 0
    87 000000A6 00000000                max dd 0
    88 000000AA 00000000                sum dd 0
    89 000000AE 00000000                ave dd 0
    90                                 
    91 000000B2 00000000                sqVal dd 0
    92                                 
    93                                 [section .bss]
    94                                 
    95 00000000 <gap>                   dLst resd 10
    96 00000028 <gap>                   chr resb 1
    97 00000029 <gap>                   inLine resb STRLEN+2
    98                                 
    99                                 
   100                                 
   101                                 
   102                                 [section .text]
   103                                 
   104                                 [global _stats1]
   105                                 stats1:
   106 00000000 4154                    push r12
   107                                 
   108 00000002 49C7C400000000          mov r12, 0
   109 00000009 48C7C000000000          mov rax, 0
   110                                 sumLoop:
   111 00000010 420304A7                add eax, dword[rdi+r12*4]
   112 00000014 49FFC4                  inc r12
   113 00000017 4939F4                  cmp r12, rsi
   114 0000001A 7CF2                    jl sumLoop
   115                                 
   116 0000001C 8902                    mov dword[rdx], eax
   117                                 
   118 0000001E 99                      cdq
   119 0000001F F7FE                    idiv esi
   120 00000021 8901                    mov dword[rcx], eax
   121                                 
   122 00000023 415C                    pop r12
   123 00000025 C3                      ret
   124                                 
   125                                 [global _stats2]
   126                                 
   127                                 stats2:
   128 00000026 55                      push rbp
   129 00000027 4889E5                  mov rbp, rsp
   130 0000002A 4154                    push r12
   131                                 
   132                                 
   133 0000002C 8B07                    mov eax, dword[rdi]
   134 0000002E 8902                    mov dword[rdx], eax
   135                                 
   136 00000030 4989F4                  mov r12, rsi
   137 00000033 49FFCC                  dec r12
   138 00000036 428B04A7                mov eax, dword[rdi+r12*4]
   139 0000003A 418901                  mov dword[r9], eax
   140                                 
   141                                 
   142 0000003D 4889F0                  mov rax, rsi
   143 00000040 48C7C200000000          mov rdx, 0
   144 00000047 49C7C402000000          mov r12, 2
   145 0000004E 49F7F4                  div r12
   146                                 
   147 00000051 4883FA00                cmp rdx, 0
   148 00000055 740A                    je evenLength
   149                                 
   150 00000057 448B2487                mov r12d, dword[rdi+rax*4]
   151 0000005B 448921                  mov dword[rcx], r12d
   152 0000005E 458920                  mov dword[r8], r12d
   153 00000061 EB0F                    jmp medDone
   154                                 
   155                                 evenLength:
   156 00000063 448B2487                mov r12d, dword[rdi+rax*4]
   157 00000067 458920                  mov dword[r8], r12d
   158 0000006A 48FFC8                  dec rax
   159 0000006D 448B2487                mov r12d, dword[rdi+rax*4]
   160 00000071 448921                  mov dword[rcx], r12d
   161                                 medDone:
   162                                 
   163                                 
   164 00000074 49C7C400000000          mov r12, 0
   165 0000007B 48C7C000000000          mov rax, 0
   166                                 
   167                                 sumLoop2:
   168 00000082 420304A7                add eax, dword[rdi+r12*4]
   169 00000086 49FFC4                  inc r12
   170 00000089 4939F4                  cmp r12, rsi
   171 0000008C 7CF2                    jl sumLoop2
   172                                 
   173 0000008E 4C8B6510                mov r12, qword[rbp+16]
   174 00000092 41890424                mov dword[r12], eax
   175                                 
   176                                 
   177 00000096 99                      cdq
   178 00000097 48F7FE                  idiv rsi
   179 0000009A 4C8B6518                mov r12, qword[rbp+24]
   180 0000009E 41890424                mov dword[r12], eax
   181                                 
   182 000000A2 415C                    pop r12
   183 000000A4 5D                      pop rbp
   184 000000A5 C3                      ret
   185                                 
   186                                 
   187                                 
   188                                 
   189                                 
   190                                 
   191                                 
   192                                 [global printString]
   193                                 printString:
   194                                 
   195 000000A6 53                      push rbx
   196                                 
   197 000000A7 4889FB                  mov rbx, rdi
   198 000000AA 48C7C200000000          mov rdx, 0
   199                                 
   200                                 strCountLoop:
   201 000000B1 803B00                  cmp byte[rbx], NULL
   202 000000B4 7406                    je strCountDone
   203 000000B6 48FFC2                  inc rdx
   204 000000B9 48FFC3                  inc rbx
   205 000000BC EBF1                    jmp strCountLoop
   206                                 strCountDone:
   207                                 
   208 000000BE 4883FA00                cmp rdx, 0
   209 000000C2 7411                    je prtDone
   210                                 
   211                                 
   212                                 
   213 000000C4 48C7C001000000          mov rax, SYS_write
   214 000000CB 4889FE                  mov rsi, rdi
   215 000000CE 48C7C701000000          mov rdi, STDOUT
   216 000000D5 0F05                    syscall
   217                                 
   218                                 
   219                                 
   220                                  prtDone:
   221 000000D7 5B                      pop rbx
   222 000000D8 C3                      ret
   223                                 
   224                                 [global _start]
   225                                 _start:
   226                                 
   227                                 
   228                                 
   229                                 
   230                                 
   231 000000D9 48C7C3[00000000]        mov rbx, list
   232 000000E0 48C7C602000000          mov rsi ,2
   233 000000E7 48C7C004000000          mov rax, 4
   234 000000EE 48C7C102000000          mov rcx, 2
   235 000000F5 3A0425[02000000]        cmp al, byte[list+2]
   236 000000FC 7506                    jne qLp
   237 000000FE C60425[04000000]06      mov byte[list+4], 6
   238                                 qLp:
   239 00000106 0286[00000000]          add al, byte[list+rsi]
   240 0000010C 4883C602                add rsi, 2
   241 00000110 E2F2                    loop qLp
   242 00000112 F66B04                  imul byte[rbx+4]
   243 00000115 66FFC0                  inc ax
   244 00000118 F67B02                  idiv byte[rbx+2]
   245 0000011B 668B1C25[00000000]      mov bx, word[list]
   246                                 
   247                                 
   248                                 
   249                                 
   250                                 
   251 00000123 68[00000000]            push ave
   252 00000128 68[00000000]            push sum
   253 0000012D 49C7C1[00000000]        mov r9, max
   254 00000134 49C7C0[00000000]        mov r8, med2
   255 0000013B 48C7C1[00000000]        mov rcx, med1
   256 00000142 48C7C2[00000000]        mov rdx, min
   257 00000149 8B3425[00000000]        mov esi, dword[len]
   258 00000150 48C7C7[00000000]        mov rdi, arr
   259                                 
   260 00000157 E8C5FEFFFF              call stats2
   261 0000015C 4883C410                add rsp, 16
   262                                 
   263                                 
   264                                 
   265 00000160 48C7C7[00000000]        mov rdi, message1
   266 00000167 E835FFFFFF              call printString
   267                                 
   268 0000016C 48C7C7[00000000]        mov rdi, message2
   269 00000173 E829FFFFFF              call printString
   270                                 
   271 00000178 48C7C7[00000000]        mov rdi, newLine
   272 0000017F E81DFFFFFF              call printString
   273                                 
   274                                 
   275                                 
   276                                 
   277                                 
   278 00000184 48C7C7[00000000]        mov rdi, pmpt
   279 0000018B E811FFFFFF              call printString
   280                                 
   281                                 
   282                                 
   283                                 
   284 00000190 48C7C3[00000000]        mov rbx, inLine
   285 00000197 49C7C400000000          mov r12, 0
   286                                 
   287                                 readCharacters:
   288 0000019E 48C7C000000000          mov rax, SYS_read
   289 000001A5 48C7C700000000          mov rdi, STDIN
   290 000001AC 488D3425[00000000]      lea rsi, byte[chr]
   291 000001B4 48C7C201000000          mov rdx, 1
   292 000001BB 0F05                    syscall
   293                                 
   294 000001BD 8A0425[00000000]        mov al, byte[chr]
   295 000001C4 3C0A                    cmp al, LF
   296 000001C6 740E                    je readDone
   297                                 
   298 000001C8 49FFC4                  inc r12
   299 000001CB 4983FC32                cmp r12, STRLEN
   300 000001CF 73CB                    jae readCharacters
   301                                 
   302 000001D1 8803                    mov byte[rbx], al
   303 000001D3 48FFC3                  inc rbx
   304                                 
   305 000001D6 EBC4                    jmp readCharacters
   306                                 readDone:
   307 000001D8 C60300                  mov byte[rbx], NULL
   308                                 
   309 000001DB 48C7C7[00000000]        mov rdi, inLine
   310 000001E2 E8BAFEFFFF              call printString
   311                                 
   312 000001E7 48C7C7[00000000]        mov rdi, newLine
   313 000001EE E8AEFEFFFF              call printString
   314                                 
   315                                 
   316                                 
   317                                 
   318                                 
   319                                 
   320                                 
   321                                 
   322                                 
   323                                 
   324                                 
   325                                 
   326                                 
   327                                 last:
   328 000001F3 48C7C03C000000          mov rax, SYS_exit
   329 000001FA 48C7C700000000          mov rdi, EXIT_SUCCESS
   330 00000201 0F05                    syscall
   331                                 

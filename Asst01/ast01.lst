     1                                 %line 1+1 ast01.asm
     2                                 
     3                                 
     4                                 %line 19+1 ast01.asm
     5                                 
     6                                 %line 92+1 ast01.asm
     7                                 
     8                                 
     9                                 
    10                                 
    11                                 
    12                                 
    13                                 
    14                                 [section .data]
    15                                 
    16                                 
    17                                 
    18                                 
    19                                 LF equ 10
    20                                 NULL equ 0
    21                                 
    22                                 
    23                                 TRUE equ 1
    24                                 FALSE equ 0
    25                                 
    26                                 EXIT_SUCCESS equ 0
    27                                 
    28                                 STDIN equ 0
    29                                 STDOUT equ 1
    30                                 STDERR equ 2
    31                                 
    32                                 SYS_read equ 0
    33                                 SYS_write equ 1
    34                                 SYS_open equ 2
    35                                 SYS_close equ 3
    36                                 SYS_fork equ 57
    37                                 SYS_exit equ 60
    38                                 SYS_creat equ 85
    39                                 SYS_time equ 201
    40                                 
    41                                 
    42                                 
    43 00000000 48656C6C6F20576F72-    message1 db "Hello World", LF, NULL
    44 00000000 6C640A00           
    45 0000000D 456E74657220416E73-    message2 db "Enter Answer: ", NULL
    46 0000000D 7765723A2000       
    47 0000001C 0A00                   newLine db LF, NULL
    48                                 
    49 0000001E 00                     inChar db 0
    50                                 STRLEN equ 50
    51 0000001F 456E74657220546578-    pmpt db "Enter Text: ", NULL
    52 0000001F 743A2000           
    53                                 
    54                                 
    55                                 
    56                                 
    57                                 
    58                                 
    59                                 
    60 0000002C 00000000                n1 dd 0
    61 00000030 0000                    n2w dw 0
    62 00000032 00000000                n3 dd 0
    63                                 
    64 00000036 00000000                res1 dd 0
    65 0000003A 00000000                res2 dd 0
    66 0000003E 00000000                res3 dd 0
    67 00000042 00000000                rem3 dd 0
    68                                 
    69                                 
    70                                 
    71 00000046 060403FF02FD0507        list db 6,4,3,-1,2,-3,5,7
    72                                 
    73 0000004E 010002000300040005-     wLst dw 1, 2, 3, 4, 5, 6, 7, 8, 9, 10
    74 0000004E 000600070008000900-
    75 0000004E 0A00               
    76 00000062 010000000200000003-     arr dd 1,2,3,4,5,6,7,8,10
    77 00000062 000000040000000500-
    78 00000062 000006000000070000-
    79 00000062 00080000000A000000 
    80 00000086 0A000000                len dd 10
    81 0000008A 00000000                min dd 0
    82 0000008E 00000000                med1 dd 0
    83 00000092 00000000                med2 dd 0
    84 00000096 00000000                max dd 0
    85 0000009A 00000000                sum dd 0
    86 0000009E 00000000                ave dd 0
    87                                 
    88 000000A2 00000000                sqVal dd 0
    89                                 
    90                                 [section .bss]
    91                                 
    92 00000000 <gap>                   dLst resd 10
    93 00000028 <gap>                   chr resb 1
    94 00000029 <gap>                   inLine resb STRLEN+2
    95                                 
    96                                 
    97                                 
    98                                 
    99                                 [section .text]
   100                                 
   101                                 [global _stats1]
   102                                 stats1:
   103 00000000 4154                    push r12
   104                                 
   105 00000002 49C7C400000000          mov r12, 0
   106 00000009 48C7C000000000          mov rax, 0
   107                                 sumLoop:
   108 00000010 420304A7                add eax, dword[rdi+r12*4]
   109 00000014 49FFC4                  inc r12
   110 00000017 4939F4                  cmp r12, rsi
   111 0000001A 7CF2                    jl sumLoop
   112                                 
   113 0000001C 8902                    mov dword[rdx], eax
   114                                 
   115 0000001E 99                      cdq
   116 0000001F F7FE                    idiv esi
   117 00000021 8901                    mov dword[rcx], eax
   118                                 
   119 00000023 415C                    pop r12
   120 00000025 C3                      ret
   121                                 
   122                                 [global _stats2]
   123                                 
   124                                 stats2:
   125 00000026 55                      push rbp
   126 00000027 4889E5                  mov rbp, rsp
   127 0000002A 4154                    push r12
   128                                 
   129                                 
   130 0000002C 8B07                    mov eax, dword[rdi]
   131 0000002E 8902                    mov dword[rdx], eax
   132                                 
   133 00000030 4989F4                  mov r12, rsi
   134 00000033 49FFCC                  dec r12
   135 00000036 428B04A7                mov eax, dword[rdi+r12*4]
   136 0000003A 418901                  mov dword[r9], eax
   137                                 
   138                                 
   139 0000003D 4889F0                  mov rax, rsi
   140 00000040 48C7C200000000          mov rdx, 0
   141 00000047 49C7C402000000          mov r12, 2
   142 0000004E 49F7F4                  div r12
   143                                 
   144 00000051 4883FA00                cmp rdx, 0
   145 00000055 740A                    je evenLength
   146                                 
   147 00000057 448B2487                mov r12d, dword[rdi+rax*4]
   148 0000005B 448921                  mov dword[rcx], r12d
   149 0000005E 458920                  mov dword[r8], r12d
   150 00000061 EB0F                    jmp medDone
   151                                 
   152                                 evenLength:
   153 00000063 448B2487                mov r12d, dword[rdi+rax*4]
   154 00000067 458920                  mov dword[r8], r12d
   155 0000006A 48FFC8                  dec rax
   156 0000006D 448B2487                mov r12d, dword[rdi+rax*4]
   157 00000071 448921                  mov dword[rcx], r12d
   158                                 medDone:
   159                                 
   160                                 
   161 00000074 49C7C400000000          mov r12, 0
   162 0000007B 48C7C000000000          mov rax, 0
   163                                 
   164                                 sumLoop2:
   165 00000082 420304A7                add eax, dword[rdi+r12*4]
   166 00000086 49FFC4                  inc r12
   167 00000089 4939F4                  cmp r12, rsi
   168 0000008C 7CF2                    jl sumLoop2
   169                                 
   170 0000008E 4C8B6510                mov r12, qword[rbp+16]
   171 00000092 41890424                mov dword[r12], eax
   172                                 
   173                                 
   174 00000096 99                      cdq
   175 00000097 48F7FE                  idiv rsi
   176 0000009A 4C8B6518                mov r12, qword[rbp+24]
   177 0000009E 41890424                mov dword[r12], eax
   178                                 
   179 000000A2 415C                    pop r12
   180 000000A4 5D                      pop rbp
   181 000000A5 C3                      ret
   182                                 
   183                                 
   184                                 
   185                                 
   186                                 
   187                                 
   188                                 
   189                                 [global printString]
   190                                 printString:
   191                                 
   192 000000A6 53                      push rbx
   193                                 
   194 000000A7 4889FB                  mov rbx, rdi
   195 000000AA 48C7C200000000          mov rdx, 0
   196                                 
   197                                 strCountLoop:
   198 000000B1 803B00                  cmp byte[rbx], NULL
   199 000000B4 7406                    je strCountDone
   200 000000B6 48FFC2                  inc rdx
   201 000000B9 48FFC3                  inc rbx
   202 000000BC EBF1                    jmp strCountLoop
   203                                 strCountDone:
   204                                 
   205 000000BE 4883FA00                cmp rdx, 0
   206 000000C2 7411                    je prtDone
   207                                 
   208                                 
   209                                 
   210 000000C4 48C7C001000000          mov rax, SYS_write
   211 000000CB 4889FE                  mov rsi, rdi
   212 000000CE 48C7C701000000          mov rdi, STDOUT
   213 000000D5 0F05                    syscall
   214                                 
   215                                 
   216                                 
   217                                  prtDone:
   218 000000D7 5B                      pop rbx
   219 000000D8 C3                      ret
   220                                 
   221                                 [global _start]
   222                                 _start:
   223                                 
   224                                 
   225                                 
   226                                 
   227                                 
   228 000000D9 48C7C3[00000000]        mov rbx, list
   229 000000E0 48C7C602000000          mov rsi ,2
   230 000000E7 48C7C004000000          mov rax, 4
   231 000000EE 48C7C102000000          mov rcx, 2
   232 000000F5 3A0425[02000000]        cmp al, byte[list+2]
   233 000000FC 7506                    jne qLp
   234 000000FE C60425[04000000]06      mov byte[list+4], 6
   235                                 qLp:
   236 00000106 0286[00000000]          add al, byte[list+rsi]
   237 0000010C 4883C602                add rsi, 2
   238 00000110 E2F2                    loop qLp
   239 00000112 F66B04                  imul byte[rbx+4]
   240 00000115 66FFC0                  inc ax
   241 00000118 F67B02                  idiv byte[rbx+2]
   242 0000011B 668B1C25[00000000]      mov bx, word[list]
   243                                 
   244                                 
   245                                 
   246                                 
   247                                 
   248 00000123 68[00000000]            push ave
   249 00000128 68[00000000]            push sum
   250 0000012D 49C7C1[00000000]        mov r9, max
   251 00000134 49C7C0[00000000]        mov r8, med2
   252 0000013B 48C7C1[00000000]        mov rcx, med1
   253 00000142 48C7C2[00000000]        mov rdx, min
   254 00000149 8B3425[00000000]        mov esi, dword[len]
   255 00000150 48C7C7[00000000]        mov rdi, arr
   256                                 
   257 00000157 E8C5FEFFFF              call stats2
   258 0000015C 4883C410                add rsp, 16
   259                                 
   260                                 
   261                                 
   262 00000160 48C7C7[00000000]        mov rdi, message1
   263 00000167 E835FFFFFF              call printString
   264                                 
   265 0000016C 48C7C7[00000000]        mov rdi, message2
   266 00000173 E829FFFFFF              call printString
   267                                 
   268 00000178 48C7C7[00000000]        mov rdi, newLine
   269 0000017F E81DFFFFFF              call printString
   270                                 
   271                                 
   272                                 
   273                                 
   274                                 
   275 00000184 48C7C7[00000000]        mov rdi, pmpt
   276 0000018B E811FFFFFF              call printString
   277                                 
   278                                 
   279                                 
   280                                 
   281 00000190 48C7C3[00000000]        mov rbx, inLine
   282 00000197 49C7C400000000          mov r12, 0
   283                                 
   284                                 readCharacters:
   285 0000019E 48C7C000000000          mov rax, SYS_read
   286 000001A5 48C7C700000000          mov rdi, STDIN
   287 000001AC 488D3425[00000000]      lea rsi, byte[chr]
   288 000001B4 48C7C201000000          mov rdx, 1
   289 000001BB 0F05                    syscall
   290                                 
   291 000001BD 8A0425[00000000]        mov al, byte[chr]
   292 000001C4 3C0A                    cmp al, LF
   293 000001C6 740E                    je readDone
   294                                 
   295 000001C8 49FFC4                  inc r12
   296 000001CB 4983FC32                cmp r12, STRLEN
   297 000001CF 73CB                    jae readCharacters
   298                                 
   299 000001D1 8803                    mov byte[rbx], al
   300 000001D3 48FFC3                  inc rbx
   301                                 
   302 000001D6 EBC4                    jmp readCharacters
   303                                 readDone:
   304 000001D8 C60300                  mov byte[rbx], NULL
   305                                 
   306 000001DB 48C7C7[00000000]        mov rdi, inLine
   307 000001E2 E8BAFEFFFF              call printString
   308                                 
   309 000001E7 48C7C7[00000000]        mov rdi, newLine
   310 000001EE E8AEFEFFFF              call printString
   311                                 
   312                                 
   313                                 
   314                                 
   315                                 
   316                                 
   317                                 
   318                                 
   319                                 
   320                                 
   321                                 
   322                                 
   323                                 
   324                                 last:
   325 000001F3 48C7C03C000000          mov rax, SYS_exit
   326 000001FA 48C7C700000000          mov rdi, EXIT_SUCCESS
   327 00000201 0F05                    syscall
   328                                 
